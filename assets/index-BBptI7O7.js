(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const s=document.getElementById("gameCanvas"),e=s.getContext("2d"),de=.5,te=5,y=400,ge=60;let le=0,oe=0,re=0,x=localStorage.getItem("speedUnlocked")==="true",R=x?2:1,J=localStorage.getItem("showFpsCounter")!=="false";const T=3200;let v=0;const p=[],U=[],k=[];let u={x:0,y:0,height:80};const l={x:100,y:y-50,width:40,height:50,vx:0,vy:0,onGround:!1,hasDoubleJump:!1,growLevel:0,canDoubleJump:!1},w=[],X=[];function V(){let o=0;const t=[];for(;o<T;){const h=Math.random()<.2?320:160+Math.random()*160;let c;if(Math.random()<.25){const d=(Math.random()<.5?1:-1)*(20+Math.random()*20);c={x:o,y,width:h,height:50,endY:y+d,isSlope:!0}}else c={x:o,y,width:h,height:50};w.push(c),t.push({x:o+h/2,y:y-30}),Math.random()<.5&&p.push({x:o+h/2-10,y:y-30,width:20,height:20,collected:!1,type:"coin"}),Math.random()<.3&&o>0&&U.push({x:o-40,y:y+35,width:40,height:15}),Math.random()<.2&&o>0&&k.push({x:o-60,y:y-100,width:80,height:20,dx:2,range:120,startX:o-60}),o+=h;const m=60+Math.random()*80;o+=m,Math.random()<.5&&o<T-50&&X.push({x:o+10,y:y-40,width:40,height:40})}if(t.length>0){const h=Math.floor(Math.random()*t.length),c=t[h];p.push({x:c.x-10,y:c.y,width:20,height:20,collected:!1,type:"heart"})}if(t.length>1){let h,c=0;const m=t.length*3;do h=Math.floor(Math.random()*t.length),c++;while(c<m&&p.some(d=>d.x===t[h].x-10&&d.y===t[h].y));if(c<m){const d=t[h];p.push({x:d.x-10,y:d.y-30,width:20,height:20,collected:!1,type:"doublejump"})}}if(t.length>2){let h,c=0;const m=t.length*3;do h=Math.floor(Math.random()*t.length),c++;while(c<m&&(p.some(d=>d.x===t[h].x-10&&d.y===t[h].y)||p.some(d=>d.x===t[h].x-10&&d.y===t[h].y-30)));if(c<m){const d=t[h];p.push({x:d.x-10,y:d.y-60,width:20,height:20,collected:!1,type:"grow"})}}const r=100;w.some(h=>h.x<=r&&h.x+h.width>=r+40)||w.unshift({x:60,y,width:80,height:50});const n=w[w.length-1];let a=n.x+n.width-32,g="isSlope"in n&&n.isSlope?n.endY-u.height:n.y-u.height;u.x=a,u.y=g}V();function W(o,t){return o.x<t.x+t.width&&o.x+o.width>t.x&&o.y<t.y+t.height&&o.y+o.height>t.y}let P=0,H=1,ue=T-100,z=0,E=3,F=!1,O=Number(localStorage.getItem("topScore")||"0"),$=!1,K=0;function se(o){o>O&&(O=o,localStorage.setItem("topScore",String(O)))}function ye(){P=0,H=1,E=3,F=!1,w.length=0,X.length=0,p.length=0,U.length=0,k.length=0,V(),Q()}function Q(){l.x=100,l.y=y-175,l.vx=0,l.vy=0,l.canDoubleJump=!1,Z()}function Z(){l.growLevel===0?(l.width=40,l.height=50):l.growLevel===1?(l.width=60,l.height=75):l.growLevel===2?(l.width=80,l.height=100):l.growLevel>=3&&(l.width=100,l.height=125)}function ie(){if(E--,E<=0){se(P),F=!0,ae();return}l.hasDoubleJump=!1,l.growLevel=0,l.canDoubleJump=!1,Z(),Q(),z=30}function ae(){let o=document.getElementById("restart-btn");o?o&&(o.style.display="block",o.style.top="calc(50% + 120px)",o.style.transform="translateX(-50%)"):(o=document.createElement("button"),o.id="restart-btn",o.textContent="Restart",o.style.position="fixed",o.style.left="50%",o.style.top="calc(50% + 120px)",o.style.transform="translateX(-50%)",o.style.fontSize="2em",o.style.padding="16px 32px",o.style.zIndex="100",o.style.background="#222",o.style.color="#fff",o.style.border="2px solid #0cf",o.style.borderRadius="12px",o.style.cursor="pointer",o.onclick=()=>{o?.remove(),ye()},document.body.appendChild(o))}function pe(){const o=document.getElementById("restart-btn");o&&(o.style.display="none")}function me(){w.length=0,X.length=0,p.length=0,U.length=0,k.length=0,V(),Q(),H++,b?(D=G(),localStorage.setItem("fixedGradientColors",JSON.stringify(D))):I?(B=G(),localStorage.setItem("scrollGradientColors",JSON.stringify(B))):S&&he(),ee(),$=!1,K=0}function xe(){ee(),$=!0,K=120}function ve(o){if(F)return;if($){K--,K<=0&&me();return}if(z>0){z--;return}l.vx=0,(f.ArrowLeft||f.KeyA)&&(l.vx=-te*R*o*60),(f.ArrowRight||f.KeyD)&&(l.vx=te*R*o*60);const t=f.ArrowUp||f.Space||f.KeyW;A>0&&A--,t&&A===0&&(l.onGround?(l.vy=-13,l.onGround=!1,l.hasDoubleJump&&(l.canDoubleJump=!0),A=8):l.hasDoubleJump&&l.canDoubleJump&&(l.vy=-13,l.canDoubleJump=!1,A=8));const r=f.KeyT;r&&!ne&&(x=!x,localStorage.setItem("speedUnlocked",String(x)),R=x?2:1),ne=r,l.vy+=de*o*60,l.x+=l.vx,l.y+=l.vy,l.onGround=!1;for(const i of w)if("isSlope"in i&&i.isSlope){if(l.x+l.width>i.x&&l.x<i.x+i.width){const n=(l.x+l.width/2-i.x)/i.width,a=i.y+(i.endY-i.y)*n;l.y+l.height>a&&l.y+l.height<a+i.height&&l.vy>=0&&(l.y=a-l.height,l.vy=0,l.onGround=!0,l.canDoubleJump=l.hasDoubleJump)}}else l.y+l.height>i.y&&l.y+l.height<i.y+i.height&&l.x+l.width>i.x&&l.x<i.x+i.width&&l.vy>=0&&(l.y=i.y-l.height,l.vy=0,l.onGround=!0,l.canDoubleJump=l.hasDoubleJump);for(const i of X)W(l,i)&&(l.y+l.height-l.vy<=i.y?(l.y=i.y-l.height,l.vy=0,l.onGround=!0):l.x+l.width-l.vx<=i.x?l.x=i.x-l.width:l.x-l.vx>=i.x+i.width?l.x=i.x+i.width:l.y-l.vy>=i.y+i.height&&(l.y=i.y+i.height,l.vy=0));for(const i of k)i.x+=i.dx,(i.x>i.startX+i.range||i.x<i.startX)&&(i.dx*=-1);for(const i of k)l.y+l.height>i.y&&l.y+l.height<i.y+i.height&&l.x+l.width>i.x&&l.x<i.x+i.width&&l.vy>=0&&(l.y=i.y-l.height,l.vy=0,l.onGround=!0,l.x+=i.dx);for(const i of p)if(!i.collected&&W(l,i)){if(i.type==="doublejump"&&l.hasDoubleJump||i.type==="grow"&&l.growLevel>=3)continue;i.collected=!0,i.type==="coin"?(P++,se(P)):i.type==="heart"?E<5&&E++:i.type==="doublejump"?(l.hasDoubleJump=!0,l.canDoubleJump=!1):i.type==="grow"&&(l.growLevel<3&&l.growLevel++,Z())}for(const i of U)if(W(l,i)){ie();break}l.y>s.height+100&&ie(),l.x+l.width>=ue&&!$&&xe(),v=l.x-s.width/2+l.width/2,v=Math.max(0,Math.min(v,T-s.width)),l.x<0&&(l.x=0),l.x+l.width>T&&(l.x=T-l.width)}function we(){return/Tesla|QtCarBrowser/i.test(navigator.userAgent)}let Y=localStorage.getItem("teslaMode")==="true";function Se(){return we()||Y||/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)}let b=localStorage.getItem("fixedGradient")==="true",I=localStorage.getItem("scrollGradient")==="true",D=JSON.parse(localStorage.getItem("fixedGradientColors")||"null")||G(),B=JSON.parse(localStorage.getItem("scrollGradientColors")||"null")||G(),S=localStorage.getItem("imageBg")==="true",L=localStorage.getItem("imageBgUrl")||null,M=null,N=!1;function he(){fetch("https://pixabay.com/api/?key=51252753-0f1aa9c83b326091b3ad96f88&q=landscape&image_type=photo&orientation=horizontal&safesearch=true&per_page=50").then(r=>r.json()).then(r=>{if(r.hits&&r.hits.length>0){const i=Math.floor(Math.random()*r.hits.length);L=r.hits[i].largeImageURL,L&&(localStorage.setItem("imageBgUrl",L),fe())}}).catch(()=>{L=null,N=!1})}function fe(){L&&(M=new window.Image,M.crossOrigin="anonymous",M.onload=()=>{N=!0},M.onerror=()=>{N=!1},M.src=L)}L&&fe();function G(){function o(){return`hsl(${Math.floor(Math.random()*360)}, 70%, 75%)`}return[o(),o()]}function q(){localStorage.setItem("fixedGradient",String(b)),localStorage.setItem("scrollGradient",String(I)),localStorage.setItem("imageBg",String(S)),localStorage.setItem("fixedGradientColors",JSON.stringify(D)),localStorage.setItem("scrollGradientColors",JSON.stringify(B)),S||(localStorage.removeItem("imageBgUrl"),L=null,M=null,N=!1)}const be="v0.1.8-6-g17f97db-dirty (17f97db, 2025-07-14)";window.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("settings-btn"),t=document.getElementById("settings-modal"),r=document.getElementById("close-settings"),i=document.getElementById("fixed-gradient-toggle"),n=document.getElementById("scroll-gradient-toggle"),a=document.getElementById("image-bg-toggle"),g=document.getElementById("speed-unlock-toggle"),h=document.getElementById("fps-counter-toggle"),c=document.getElementById("tesla-mode-toggle");o&&t&&r&&i&&n&&a&&g&&h&&c&&(o.addEventListener("click",()=>{t.style.display="flex",i.checked=b,n.checked=I,a.checked=S,g.checked=x,h.checked=J,c.checked=Y}),r.addEventListener("click",()=>{t.style.display="none"}),i.addEventListener("change",()=>{i.checked?(b=!0,I=!1,S=!1,n.checked=!1,a.checked=!1,D=G()):b=!1,q()}),n.addEventListener("change",()=>{n.checked?(I=!0,b=!1,S=!1,i.checked=!1,a.checked=!1,B=G()):I=!1,q()}),a.addEventListener("change",()=>{a.checked?(S=!0,b=!1,I=!1,i.checked=!1,n.checked=!1,he()):S=!1,q()}),g.addEventListener("change",()=>{x=g.checked,localStorage.setItem("speedUnlocked",String(x)),R=x?2:1}),h.addEventListener("change",()=>{J=h.checked,localStorage.setItem("showFpsCounter",String(J))}),c.addEventListener("change",()=>{Y=c.checked,localStorage.setItem("teslaMode",String(Y)),_()}));const m=document.querySelector('#settings-modal [style*="Version: v0.1.8-6-g17f97db-dirty (17f97db, 2025-07-14)"]');m&&(m.textContent=`Version: ${be}`),_()});function _(){const o=document.getElementById("onscreen-controls"),t=document.getElementById("desktop-copyright"),r=Se();o&&(o.style.display=r?"flex":"none"),t&&(t.style.display=r?"none":"block")}function Ie(){const o=document.getElementById("btn-left"),t=document.getElementById("btn-right"),r=document.getElementById("btn-jump");o&&t&&r&&(o.addEventListener("touchstart",i=>{i.preventDefault(),f.ArrowLeft=!0}),o.addEventListener("touchend",i=>{i.preventDefault(),f.ArrowLeft=!1}),t.addEventListener("touchstart",i=>{i.preventDefault(),f.ArrowRight=!0}),t.addEventListener("touchend",i=>{i.preventDefault(),f.ArrowRight=!1}),r.addEventListener("touchstart",i=>{i.preventDefault(),f.Space=!0}),r.addEventListener("touchend",i=>{i.preventDefault(),f.Space=!1}),o.addEventListener("mousedown",i=>{i.preventDefault(),f.ArrowLeft=!0}),o.addEventListener("mouseup",i=>{i.preventDefault(),f.ArrowLeft=!1}),t.addEventListener("mousedown",i=>{i.preventDefault(),f.ArrowRight=!0}),t.addEventListener("mouseup",i=>{i.preventDefault(),f.ArrowRight=!1}),r.addEventListener("mousedown",i=>{i.preventDefault(),f.Space=!0}),r.addEventListener("mouseup",i=>{i.preventDefault(),f.Space=!1}))}Ie();_();let C=[],j=0;function ee(){C=[];for(let o=0;o<60;o++){const t=Math.random()*Math.PI*2,r=4+Math.random()*3;C.push({x:s.width/2+(Math.random()-.5)*100,y:s.height/2-80+(Math.random()-.5)*40,vx:Math.cos(t)*r,vy:Math.sin(t)*r-2,color:`hsl(${Math.floor(Math.random()*360)}, 80%, 60%)`,size:8+Math.random()*8,life:60+Math.random()*40,angle:Math.random()*Math.PI*2,spin:(Math.random()-.5)*.2})}j=60}function Me(){for(const o of C)o.x+=o.vx,o.y+=o.vy,o.vy+=.15,o.angle+=o.spin,o.life--;C=C.filter(o=>o.life>0&&o.y<s.height+40),j>0&&j--}function Le(){for(const o of C)e.save(),e.translate(o.x,o.y),e.rotate(o.angle),e.fillStyle=o.color,e.fillRect(-o.size/2,-o.size/6,o.size,o.size/3),e.restore()}function Te(){if(S&&N&&M){const t=M,r=Math.max(s.width/t.width,s.height/t.height),i=t.width*r,n=t.height*r;let a=-v%i;a>0&&(a-=i);for(let g=a;g<s.width;g+=i)e.drawImage(t,g,0,i,n)}else if(b){const t=e.createLinearGradient(0,0,0,s.height);t.addColorStop(0,D[0]),t.addColorStop(1,D[1]),e.fillStyle=t,e.fillRect(0,0,s.width,s.height)}else if(I){const t=e.createLinearGradient(-v,0,T-v,s.height);t.addColorStop(0,B[0]),t.addColorStop(1,B[1]),e.fillStyle=t,e.fillRect(0,0,s.width,s.height)}else e.fillStyle="#87ceeb",e.fillRect(0,0,s.width,s.height);e.save(),e.translate(-v,0),e.fillStyle="#654321";for(const t of w)"isSlope"in t&&t.isSlope?(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.endY),e.lineTo(t.x+t.width,t.endY+t.height),e.lineTo(t.x,t.y+t.height),e.closePath(),e.fill()):e.fillRect(t.x,t.y,t.width,t.height);e.fillStyle="#888";for(const t of k)e.fillRect(t.x,t.y,t.width,t.height);e.fillStyle="#b5651d";for(const t of X)e.fillRect(t.x,t.y,t.width,t.height);for(const t of p)t.collected||(t.type==="coin"?(e.fillStyle="#0cf",e.beginPath(),e.arc(t.x+t.width/2,t.y+t.height/2,10,0,2*Math.PI),e.fill()):t.type==="heart"?(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.scale(1.2,1.2),e.beginPath(),e.moveTo(0,6),e.bezierCurveTo(0,0,-10,0,-10,6),e.bezierCurveTo(-10,12,0,16,0,20),e.bezierCurveTo(0,16,10,12,10,6),e.bezierCurveTo(10,0,0,0,0,6),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore()):t.type==="doublejump"?(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.rotate(-.3),e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(10,-10,0,-20),e.quadraticCurveTo(-8,-10,0,0),e.closePath(),e.fillStyle="#fff",e.fill(),e.strokeStyle="#0cf",e.lineWidth=2,e.stroke(),e.restore()):t.type==="grow"&&(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.lineTo(10,10),e.arc(0,10,10,0,Math.PI,!0),e.closePath(),e.fillStyle="#fff",e.fill(),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore()));e.fillStyle="#e33";for(const t of U)e.beginPath(),e.moveTo(t.x,t.y+t.height),e.lineTo(t.x+t.width/2,t.y),e.lineTo(t.x+t.width,t.y+t.height),e.closePath(),e.fill();if(e.restore(),z>0&&Math.floor(z/5)%2===0?e.globalAlpha=.3:e.globalAlpha=1,e.fillStyle="#ff0",e.fillRect(l.x-v,l.y,l.width,l.height),e.globalAlpha=1,e.save(),e.fillStyle="#fff",e.font="20px sans-serif",e.textAlign="left",e.fillText(`Score: ${P}`,20,30),e.fillText(`Top Score: ${O}`,20,60),e.fillText(`Level: ${H}`,20,90),J&&e.fillText(`FPS: ${re}`,20,120),x){e.fillStyle="#0cf";const t=J?150:120;e.fillText(`Speed: ${R}x`,20,t)}for(let t=0;t<E;t++)e.save(),e.translate(20+t*28,120),e.scale(1.2,1.2),e.beginPath(),e.moveTo(0,6),e.bezierCurveTo(0,0,-10,0,-10,6),e.bezierCurveTo(-10,12,0,16,0,20),e.bezierCurveTo(0,16,10,12,10,6),e.bezierCurveTo(10,0,0,0,0,6),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore();let o=20+E*28+20;l.hasDoubleJump&&(e.save(),e.translate(o,120),e.rotate(-.3),e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(10,-10,0,-20),e.quadraticCurveTo(-8,-10,0,0),e.closePath(),e.fillStyle="#fff",e.fill(),e.strokeStyle="#0cf",e.lineWidth=2,e.stroke(),e.restore(),o+=36);for(let t=0;t<l.growLevel;t++)e.save(),e.translate(o,120),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.lineTo(10,10),e.arc(0,10,10,0,Math.PI,!0),e.closePath(),e.fillStyle="#fff",e.fill(),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore(),o+=36;e.restore(),F?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(s.width/2-200,s.height/2-100,400,200),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(s.width/2-200,s.height/2-100,400,200),e.font="bold 48px sans-serif",e.fillStyle="#e33",e.textAlign="center",e.fillText("Game Over",s.width/2,s.height/2-60),e.font="32px sans-serif",e.fillStyle="#fff",e.fillText(`Score: ${P}`,s.width/2,s.height/2-10),e.fillText(`Top Score: ${O}`,s.width/2,s.height/2+40),P>Number(localStorage.getItem("topScore")||"0")&&(e.font="bold 28px sans-serif",e.fillStyle="#0cf",e.fillText("You beat your own top score!",s.width/2,s.height/2+90),j===0&&ee()),e.restore(),ae()):pe(),e.save(),e.translate(-v,0),e.fillStyle="#fff",e.fillRect(u.x,u.y,8,u.height),e.beginPath(),e.moveTo(u.x+8,u.y),e.lineTo(u.x+8+32,u.y+16),e.lineTo(u.x+8,u.y+32),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore(),Le()}function ce(){const o=performance.now(),t=o-le;Te(),t>=1e3/ge&&(oe++,oe%60===0&&(re=Math.round(1e3/(t/60))),ve(t/1e3),Me(),le=o),requestAnimationFrame(ce)}const f={};let ne=!1,A=0;window.addEventListener("keydown",o=>{f[o.code]=!0});window.addEventListener("keyup",o=>{f[o.code]=!1});ce();
