(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const a=document.getElementById("gameCanvas"),e=a.getContext("2d"),de=.5,ee=5,u=400,ge=60;let te=0,le=0,ne=0,m=localStorage.getItem("speedUnlocked")==="true",A=m?2:1,R=localStorage.getItem("showFpsCounter")!=="false";const L=3200;let x=0;const y=[],N=[],C=[];let g={x:0,y:0,height:80};const l={x:100,y:u-50,width:40,height:50,vx:0,vy:0,onGround:!1,hasDoubleJump:!1,growLevel:0,canDoubleJump:!1},v=[],U=[];function q(){let o=0;const t=[];for(;o<L;){const h=Math.random()<.2?320:160+Math.random()*160;let c;if(Math.random()<.25){const ce=(Math.random()<.5?1:-1)*(20+Math.random()*20);c={x:o,y:u,width:h,height:50,endY:u+ce,isSlope:!0}}else c={x:o,y:u,width:h,height:50};v.push(c),t.push({x:o+h/2,y:u-30}),Math.random()<.5&&y.push({x:o+h/2-10,y:u-30,width:20,height:20,collected:!1,type:"coin"}),Math.random()<.3&&o>0&&N.push({x:o-40,y:u+35,width:40,height:15}),Math.random()<.2&&o>0&&C.push({x:o-60,y:u-100,width:80,height:20,dx:2,range:120,startX:o-60}),o+=h;const p=60+Math.random()*80;o+=p,Math.random()<.5&&o<L-50&&U.push({x:o+10,y:u-40,width:40,height:40})}if(t.length>0){const h=Math.floor(Math.random()*t.length),c=t[h];y.push({x:c.x-10,y:c.y,width:20,height:20,collected:!1,type:"heart"})}if(t.length>1){let h;do h=Math.floor(Math.random()*t.length);while(y.some(p=>p.x===t[h].x-10&&p.y===t[h].y));const c=t[h];y.push({x:c.x-10,y:c.y-30,width:20,height:20,collected:!1,type:"doublejump"})}if(t.length>2){let h;do h=Math.floor(Math.random()*t.length);while(y.some(p=>p.x===t[h].x-10&&p.y===t[h].y)||y.some(p=>p.x===t[h].x-10&&p.y===t[h].y-30));const c=t[h];y.push({x:c.x-10,y:c.y-60,width:20,height:20,collected:!1,type:"grow"})}const r=100;v.some(h=>h.x<=r&&h.x+h.width>=r+40)||v.unshift({x:60,y:u,width:80,height:50});const n=v[v.length-1];let s=n.x+n.width-32,d="isSlope"in n&&n.isSlope?n.endY-g.height:n.y-g.height;g.x=s,g.y=d}q();function F(o,t){return o.x<t.x+t.width&&o.x+o.width>t.x&&o.y<t.y+t.height&&o.y+o.height>t.y}let T=0,V=1,ue=L-100,O=0,P=3,j=!1,J=Number(localStorage.getItem("topScore")||"0"),Y=!1,K=0;function re(o){o>J&&(J=o,localStorage.setItem("topScore",String(J)))}function ye(){T=0,V=1,P=3,j=!1,v.length=0,U.length=0,y.length=0,N.length=0,C.length=0,q(),H()}function H(){l.x=100,l.y=u-175,l.vx=0,l.vy=0,l.canDoubleJump=!1,Q()}function Q(){l.growLevel===0?(l.width=40,l.height=50):l.growLevel===1?(l.width=60,l.height=75):l.growLevel===2?(l.width=80,l.height=100):l.growLevel>=3&&(l.width=100,l.height=125)}function oe(){if(P--,P<=0){re(T),j=!0,ae();return}l.hasDoubleJump=!1,l.growLevel=0,l.canDoubleJump=!1,Q(),H(),O=30}function ae(){let o=document.getElementById("restart-btn");o?o&&(o.style.display="block",o.style.top="calc(50% + 120px)",o.style.transform="translateX(-50%)"):(o=document.createElement("button"),o.id="restart-btn",o.textContent="Restart",o.style.position="fixed",o.style.left="50%",o.style.top="calc(50% + 120px)",o.style.transform="translateX(-50%)",o.style.fontSize="2em",o.style.padding="16px 32px",o.style.zIndex="100",o.style.background="#222",o.style.color="#fff",o.style.border="2px solid #0cf",o.style.borderRadius="12px",o.style.cursor="pointer",o.onclick=()=>{o?.remove(),ye()},document.body.appendChild(o))}function pe(){const o=document.getElementById("restart-btn");o&&(o.style.display="none")}function me(){v.length=0,U.length=0,y.length=0,N.length=0,C.length=0,q(),H(),V++,S?(k=B(),localStorage.setItem("fixedGradientColors",JSON.stringify(k))):b?(D=B(),localStorage.setItem("scrollGradientColors",JSON.stringify(D))):w&&se(),Z(),Y=!1,K=0}function xe(){Z(),Y=!0,K=120}function ve(o){if(j)return;if(Y){K--,K<=0&&me();return}if(O>0){O--;return}l.vx=0,(f.ArrowLeft||f.KeyA)&&(l.vx=-ee*A*o*60),(f.ArrowRight||f.KeyD)&&(l.vx=ee*A*o*60);const t=f.ArrowUp||f.Space||f.KeyW;G>0&&G--,t&&G===0&&(l.onGround?(l.vy=-13,l.onGround=!1,l.hasDoubleJump&&(l.canDoubleJump=!0),G=8):l.hasDoubleJump&&l.canDoubleJump&&(l.vy=-13,l.canDoubleJump=!1,G=8));const r=f.KeyT;r&&!ie&&(m=!m,localStorage.setItem("speedUnlocked",String(m)),A=m?2:1),ie=r,l.vy+=de*o*60,l.x+=l.vx,l.y+=l.vy,l.onGround=!1;for(const i of v)if("isSlope"in i&&i.isSlope){if(l.x+l.width>i.x&&l.x<i.x+i.width){const n=(l.x+l.width/2-i.x)/i.width,s=i.y+(i.endY-i.y)*n;l.y+l.height>s&&l.y+l.height<s+i.height&&l.vy>=0&&(l.y=s-l.height,l.vy=0,l.onGround=!0,l.canDoubleJump=l.hasDoubleJump)}}else l.y+l.height>i.y&&l.y+l.height<i.y+i.height&&l.x+l.width>i.x&&l.x<i.x+i.width&&l.vy>=0&&(l.y=i.y-l.height,l.vy=0,l.onGround=!0,l.canDoubleJump=l.hasDoubleJump);for(const i of U)F(l,i)&&(l.y+l.height-l.vy<=i.y?(l.y=i.y-l.height,l.vy=0,l.onGround=!0):l.x+l.width-l.vx<=i.x?l.x=i.x-l.width:l.x-l.vx>=i.x+i.width?l.x=i.x+i.width:l.y-l.vy>=i.y+i.height&&(l.y=i.y+i.height,l.vy=0));for(const i of C)i.x+=i.dx,(i.x>i.startX+i.range||i.x<i.startX)&&(i.dx*=-1);for(const i of C)l.y+l.height>i.y&&l.y+l.height<i.y+i.height&&l.x+l.width>i.x&&l.x<i.x+i.width&&l.vy>=0&&(l.y=i.y-l.height,l.vy=0,l.onGround=!0,l.x+=i.dx);for(const i of y)if(!i.collected&&F(l,i)){if(i.type==="doublejump"&&l.hasDoubleJump||i.type==="grow"&&l.growLevel>=3)continue;i.collected=!0,i.type==="coin"?(T++,re(T)):i.type==="heart"?P<5&&P++:i.type==="doublejump"?(l.hasDoubleJump=!0,l.canDoubleJump=!1):i.type==="grow"&&(l.growLevel<3&&l.growLevel++,Q())}for(const i of N)if(F(l,i)){oe();break}l.y>a.height+100&&oe(),l.x+l.width>=ue&&!Y&&xe(),x=l.x-a.width/2+l.width/2,x=Math.max(0,Math.min(x,L-a.width)),l.x<0&&(l.x=0),l.x+l.width>L&&(l.x=L-l.width)}function we(){return/Tesla|QtCarBrowser/i.test(navigator.userAgent)}let X=localStorage.getItem("teslaMode")==="true";function Se(){return we()||X||/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)}let S=localStorage.getItem("fixedGradient")==="true",b=localStorage.getItem("scrollGradient")==="true",k=JSON.parse(localStorage.getItem("fixedGradientColors")||"null")||B(),D=JSON.parse(localStorage.getItem("scrollGradientColors")||"null")||B(),w=localStorage.getItem("imageBg")==="true",M=localStorage.getItem("imageBgUrl")||null,I=null,z=!1;function se(){fetch("https://pixabay.com/api/?key=51252753-0f1aa9c83b326091b3ad96f88&q=landscape&image_type=photo&orientation=horizontal&safesearch=true&per_page=50").then(r=>r.json()).then(r=>{if(r.hits&&r.hits.length>0){const i=Math.floor(Math.random()*r.hits.length);M=r.hits[i].largeImageURL,M&&(localStorage.setItem("imageBgUrl",M),he())}}).catch(()=>{M=null,z=!1})}function he(){M&&(I=new window.Image,I.crossOrigin="anonymous",I.onload=()=>{z=!0},I.onerror=()=>{z=!1},I.src=M)}M&&he();function B(){function o(){return`hsl(${Math.floor(Math.random()*360)}, 70%, 75%)`}return[o(),o()]}function W(){localStorage.setItem("fixedGradient",String(S)),localStorage.setItem("scrollGradient",String(b)),localStorage.setItem("imageBg",String(w)),localStorage.setItem("fixedGradientColors",JSON.stringify(k)),localStorage.setItem("scrollGradientColors",JSON.stringify(D)),w||(localStorage.removeItem("imageBgUrl"),M=null,I=null,z=!1)}window.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("settings-btn"),t=document.getElementById("settings-modal"),r=document.getElementById("close-settings"),i=document.getElementById("fixed-gradient-toggle"),n=document.getElementById("scroll-gradient-toggle"),s=document.getElementById("image-bg-toggle"),d=document.getElementById("speed-unlock-toggle"),h=document.getElementById("fps-counter-toggle"),c=document.getElementById("tesla-mode-toggle");o&&t&&r&&i&&n&&s&&d&&h&&c&&(o.addEventListener("click",()=>{t.style.display="flex",i.checked=S,n.checked=b,s.checked=w,d.checked=m,h.checked=R,c.checked=X}),r.addEventListener("click",()=>{t.style.display="none"}),i.addEventListener("change",()=>{i.checked?(S=!0,b=!1,w=!1,n.checked=!1,s.checked=!1,k=B()):S=!1,W()}),n.addEventListener("change",()=>{n.checked?(b=!0,S=!1,w=!1,i.checked=!1,s.checked=!1,D=B()):b=!1,W()}),s.addEventListener("change",()=>{s.checked?(w=!0,S=!1,b=!1,i.checked=!1,n.checked=!1,se()):w=!1,W()}),d.addEventListener("change",()=>{m=d.checked,localStorage.setItem("speedUnlocked",String(m)),A=m?2:1}),h.addEventListener("change",()=>{R=h.checked,localStorage.setItem("showFpsCounter",String(R))}),c.addEventListener("change",()=>{X=c.checked,localStorage.setItem("teslaMode",String(X)),_()})),_()});function _(){const o=document.getElementById("onscreen-controls"),t=document.getElementById("desktop-copyright"),r=Se();o&&(o.style.display=r?"flex":"none"),t&&(t.style.display=r?"none":"block")}function be(){const o=document.getElementById("btn-left"),t=document.getElementById("btn-right"),r=document.getElementById("btn-jump");o&&t&&r&&(o.addEventListener("touchstart",i=>{i.preventDefault(),f.ArrowLeft=!0}),o.addEventListener("touchend",i=>{i.preventDefault(),f.ArrowLeft=!1}),t.addEventListener("touchstart",i=>{i.preventDefault(),f.ArrowRight=!0}),t.addEventListener("touchend",i=>{i.preventDefault(),f.ArrowRight=!1}),r.addEventListener("touchstart",i=>{i.preventDefault(),f.Space=!0}),r.addEventListener("touchend",i=>{i.preventDefault(),f.Space=!1}),o.addEventListener("mousedown",i=>{i.preventDefault(),f.ArrowLeft=!0}),o.addEventListener("mouseup",i=>{i.preventDefault(),f.ArrowLeft=!1}),t.addEventListener("mousedown",i=>{i.preventDefault(),f.ArrowRight=!0}),t.addEventListener("mouseup",i=>{i.preventDefault(),f.ArrowRight=!1}),r.addEventListener("mousedown",i=>{i.preventDefault(),f.Space=!0}),r.addEventListener("mouseup",i=>{i.preventDefault(),f.Space=!1}))}be();_();let E=[],$=0;function Z(){E=[];for(let o=0;o<60;o++){const t=Math.random()*Math.PI*2,r=4+Math.random()*3;E.push({x:a.width/2+(Math.random()-.5)*100,y:a.height/2-80+(Math.random()-.5)*40,vx:Math.cos(t)*r,vy:Math.sin(t)*r-2,color:`hsl(${Math.floor(Math.random()*360)}, 80%, 60%)`,size:8+Math.random()*8,life:60+Math.random()*40,angle:Math.random()*Math.PI*2,spin:(Math.random()-.5)*.2})}$=60}function Ie(){for(const o of E)o.x+=o.vx,o.y+=o.vy,o.vy+=.15,o.angle+=o.spin,o.life--;E=E.filter(o=>o.life>0&&o.y<a.height+40),$>0&&$--}function Me(){for(const o of E)e.save(),e.translate(o.x,o.y),e.rotate(o.angle),e.fillStyle=o.color,e.fillRect(-o.size/2,-o.size/6,o.size,o.size/3),e.restore()}function Le(){if(w&&z&&I){const t=I,r=Math.max(a.width/t.width,a.height/t.height),i=t.width*r,n=t.height*r;let s=-x%i;s>0&&(s-=i);for(let d=s;d<a.width;d+=i)e.drawImage(t,d,0,i,n)}else if(S){const t=e.createLinearGradient(0,0,0,a.height);t.addColorStop(0,k[0]),t.addColorStop(1,k[1]),e.fillStyle=t,e.fillRect(0,0,a.width,a.height)}else if(b){const t=e.createLinearGradient(-x,0,L-x,a.height);t.addColorStop(0,D[0]),t.addColorStop(1,D[1]),e.fillStyle=t,e.fillRect(0,0,a.width,a.height)}else e.fillStyle="#87ceeb",e.fillRect(0,0,a.width,a.height);e.save(),e.translate(-x,0),e.fillStyle="#654321";for(const t of v)"isSlope"in t&&t.isSlope?(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.endY),e.lineTo(t.x+t.width,t.endY+t.height),e.lineTo(t.x,t.y+t.height),e.closePath(),e.fill()):e.fillRect(t.x,t.y,t.width,t.height);e.fillStyle="#888";for(const t of C)e.fillRect(t.x,t.y,t.width,t.height);e.fillStyle="#b5651d";for(const t of U)e.fillRect(t.x,t.y,t.width,t.height);for(const t of y)t.collected||(t.type==="coin"?(e.fillStyle="#0cf",e.beginPath(),e.arc(t.x+t.width/2,t.y+t.height/2,10,0,2*Math.PI),e.fill()):t.type==="heart"?(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.scale(1.2,1.2),e.beginPath(),e.moveTo(0,6),e.bezierCurveTo(0,0,-10,0,-10,6),e.bezierCurveTo(-10,12,0,16,0,20),e.bezierCurveTo(0,16,10,12,10,6),e.bezierCurveTo(10,0,0,0,0,6),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore()):t.type==="doublejump"?(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.rotate(-.3),e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(10,-10,0,-20),e.quadraticCurveTo(-8,-10,0,0),e.closePath(),e.fillStyle="#fff",e.fill(),e.strokeStyle="#0cf",e.lineWidth=2,e.stroke(),e.restore()):t.type==="grow"&&(e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.lineTo(10,10),e.arc(0,10,10,0,Math.PI,!0),e.closePath(),e.fillStyle="#fff",e.fill(),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore()));e.fillStyle="#e33";for(const t of N)e.beginPath(),e.moveTo(t.x,t.y+t.height),e.lineTo(t.x+t.width/2,t.y),e.lineTo(t.x+t.width,t.y+t.height),e.closePath(),e.fill();if(e.restore(),O>0&&Math.floor(O/5)%2===0?e.globalAlpha=.3:e.globalAlpha=1,e.fillStyle="#ff0",e.fillRect(l.x-x,l.y,l.width,l.height),e.globalAlpha=1,e.save(),e.fillStyle="#fff",e.font="20px sans-serif",e.textAlign="left",e.fillText(`Score: ${T}`,20,30),e.fillText(`Top Score: ${J}`,20,60),e.fillText(`Level: ${V}`,20,90),R&&e.fillText(`FPS: ${ne}`,20,120),m){e.fillStyle="#0cf";const t=R?150:120;e.fillText(`Speed: ${A}x`,20,t)}for(let t=0;t<P;t++)e.save(),e.translate(20+t*28,120),e.scale(1.2,1.2),e.beginPath(),e.moveTo(0,6),e.bezierCurveTo(0,0,-10,0,-10,6),e.bezierCurveTo(-10,12,0,16,0,20),e.bezierCurveTo(0,16,10,12,10,6),e.bezierCurveTo(10,0,0,0,0,6),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore();let o=20+P*28+20;l.hasDoubleJump&&(e.save(),e.translate(o,120),e.rotate(-.3),e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(10,-10,0,-20),e.quadraticCurveTo(-8,-10,0,0),e.closePath(),e.fillStyle="#fff",e.fill(),e.strokeStyle="#0cf",e.lineWidth=2,e.stroke(),e.restore(),o+=36);for(let t=0;t<l.growLevel;t++)e.save(),e.translate(o,120),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.lineTo(10,10),e.arc(0,10,10,0,Math.PI,!0),e.closePath(),e.fillStyle="#fff",e.fill(),e.beginPath(),e.arc(0,0,10,Math.PI,2*Math.PI),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore(),o+=36;e.restore(),j?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(a.width/2-200,a.height/2-100,400,200),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(a.width/2-200,a.height/2-100,400,200),e.font="bold 48px sans-serif",e.fillStyle="#e33",e.textAlign="center",e.fillText("Game Over",a.width/2,a.height/2-60),e.font="32px sans-serif",e.fillStyle="#fff",e.fillText(`Score: ${T}`,a.width/2,a.height/2-10),e.fillText(`Top Score: ${J}`,a.width/2,a.height/2+40),T>Number(localStorage.getItem("topScore")||"0")&&(e.font="bold 28px sans-serif",e.fillStyle="#0cf",e.fillText("You beat your own top score!",a.width/2,a.height/2+90),$===0&&Z()),e.restore(),ae()):pe(),e.save(),e.translate(-x,0),e.fillStyle="#fff",e.fillRect(g.x,g.y,8,g.height),e.beginPath(),e.moveTo(g.x+8,g.y),e.lineTo(g.x+8+32,g.y+16),e.lineTo(g.x+8,g.y+32),e.closePath(),e.fillStyle="#e33",e.fill(),e.restore(),Me()}function fe(){const o=performance.now(),t=o-te;Le(),t>=1e3/ge&&(le++,le%60===0&&(ne=Math.round(1e3/(t/60))),ve(t/1e3),Ie(),te=o),requestAnimationFrame(fe)}const f={};let ie=!1,G=0;window.addEventListener("keydown",o=>{f[o.code]=!0});window.addEventListener("keyup",o=>{f[o.code]=!1});fe();
