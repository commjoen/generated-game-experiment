<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Side-Scrolling Platformer</title>
  <meta name="description" content="A fast, modern side-scrolling platformer game playable in any browser, including Tesla and mobile." />
  <link rel="canonical" href="https://commjoen.github.io/generated-game-experiment/" />
  <!-- Open Graph -->
  <meta property="og:title" content="Side-Scrolling Platformer" />
  <meta property="og:description" content="A fast, modern side-scrolling platformer game playable in any browser, including Tesla and mobile." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://commjoen.github.io/generated-game-experiment/"/>
  <meta property="og:image" content="https://commjoen.github.io/generated-game-experiment/preview.png" />
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Side-Scrolling Platformer" />
  <meta name="twitter:description" content="A fast, modern side-scrolling platformer game playable in any browser, including Tesla and mobile." />
  <meta name="twitter:image" content="https://commjoen.github.io/generated-game-experiment/preview.png" />
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "VideoGame",
    "name": "Side-Scrolling Platformer",
    "description": "A fast, modern side-scrolling platformer game playable in any browser, including Tesla and mobile.",
    "url": "https://commjoen.github.io/generated-game-experiment",
    "applicationCategory": "Game",
    "operatingSystem": "All",
    "author": [
      { "@type": "Person", "name": "Jeroen Willemsen" },
      { "@type": "Person", "name": "Elisa Willemsen" },
      { "@type": "Organization", "name": "AI" }
    ],
    "image": "https://commjoen.github.io/generated-game-experiment/preview.png"
  }
  </script>
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
      <style>
      body { margin: 0; background: #222; overscroll-behavior: none; touch-action: none; }
      html, body { height: 100%; width: 100%; overflow: hidden; }
      canvas { display: block; margin: 0 auto; background: #87ceeb; width: 100vw; height: 100vh; max-width: 100vw; max-height: 100vh; touch-action: none; }
      
      /* Ensure proper icon centering on iOS Chrome */
      button {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      
      /* Specific fixes for emoji icons on iOS */
      button:has(span), button {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      }
      #mobile-controls { z-index: 20; }
      #rotate-overlay {
        display: none;
        position: fixed;
        left: 0; top: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.85);
        color: #fff;
        font-size: 2em;
        align-items: center;
        justify-content: center;
        text-align: center;
        z-index: 1000;
        pointer-events: auto;
      }
    </style>
</head>
<body>
  <main id="main-content" role="main" tabindex="-1">
  <canvas id="gameCanvas" width="800" height="450"></canvas>
  <div id="desktop-copyright" style="position:fixed; left:0; right:0; bottom:80px; text-align:center; color:#aaa; font-size:14px; z-index:20; pointer-events:none;">
    <span style="background:rgba(34,34,34,0.7); padding:4px 12px; border-radius:8px; pointer-events:auto;">
      &copy; 2024 Jeroen Willemsen &middot; <a href="https://github.com/commjoen/generated-game-experiment" target="_blank" style="color:#0cf; text-decoration:underline; pointer-events:auto;">Source code</a>
    </span>
  </div>
  <div id="onscreen-controls" style="display:none; position:fixed; left:0; right:0; bottom:20px; justify-content:center; gap:20px; pointer-events:none; flex-direction:column; align-items:center;">
    <div style="display:flex; gap:20px; pointer-events:none;">
      <button id="btn-left" style="width:60px;height:60px;font-size:2em;opacity:0.8;pointer-events:auto;border:none;border-radius:50%;background:rgba(0,0,0,0.7);color:#fff;display:flex;align-items:center;justify-content:center;line-height:1;padding:0;margin:0;">◀️</button>
      <button id="btn-jump" style="width:60px;height:60px;font-size:2em;opacity:0.8;pointer-events:auto;border:none;border-radius:50%;background:rgba(0,0,0,0.7);color:#fff;display:flex;align-items:center;justify-content:center;line-height:1;padding:0;margin:0;">⏫</button>
      <button id="btn-right" style="width:60px;height:60px;font-size:2em;opacity:0.8;pointer-events:auto;border:none;border-radius:50%;background:rgba(0,0,0,0.7);color:#fff;display:flex;align-items:center;justify-content:center;line-height:1;padding:0;margin:0;">▶️</button>
    </div>
    <div style="margin-top:10px; text-align:center; color:#aaa; font-size:14px; pointer-events:auto;">
      <span style="background:rgba(34,34,34,0.7); padding:4px 12px; border-radius:8px;">
        &copy; 2024 Jeroen Willemsen &middot; <a href="https://github.com/commjoen/generated-game-experiment" target="_blank" style="color:#0cf; text-decoration:underline;">Source code</a>
      </span>
    </div>
  </div>
  <div id="rotate-overlay">Please rotate your device to portrait mode</div>
  <button id="settings-btn" style="position:fixed;top:20px;right:20px;z-index:30;font-size:1.5em;padding:8px 16px;border-radius:8px;border:none;background:#222;color:#0cf;cursor:pointer;display:flex;align-items:center;justify-content:center;line-height:1;">⚙️</button>
  <div id="settings-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);z-index:50;align-items:center;justify-content:center;">
    <div style="background:#222;padding:32px 40px;border-radius:16px;box-shadow:0 8px 32px #0008;min-width:280px;color:#fff;position:relative;">
      <button id="close-settings" style="position:absolute;top:12px;right:12px;font-size:1.2em;background:none;border:none;color:#fff;cursor:pointer;">✖️</button>
      <h2 style="margin-top:0;font-size:1.3em;">Settings</h2>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="fixed-gradient-toggle" />
        Fixed background gradient
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="scroll-gradient-toggle" />
        Scrolling background gradient
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="image-bg-toggle" />
        Random landscape background (scrolls with player)
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="speed-unlock-toggle" />
        Unlock maximum speed (2x movement speed)
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="fps-counter-toggle" />
        Show FPS counter
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="tesla-mode-toggle" />
        Tesla Mode (always show onscreen controls)
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <input type="checkbox" id="multiplayer-toggle" />
        Enable Multiplayer (optional)
      </label>
      <label style="display:flex;align-items:center;gap:8px;margin:16px 0;">
        <span style="min-width:90px;">Player Name:</span>
        <input type="text" id="player-name-input" maxlength="12" style="flex:1;min-width:0;max-width:160px;padding:4px 8px;border-radius:6px;border:1px solid #444;background:#111;color:#fff;" placeholder="Player" />
      </label>
      <div style="margin-top:24px;padding-top:16px;border-top:1px solid #444;color:#aaa;font-size:14px;">
        <div style="margin-bottom:8px;"><strong>Keyboard Controls:</strong></div>
        <div>• Press <strong>T</strong> to toggle speed</div>
        <div>• Arrow keys or WASD to move</div>
        <div>• Space or Up arrow to jump</div>
      </div>
      <div id="version-string" style="margin-top:18px; color:#888; font-size:13px; text-align:right;"></div>
    </div>
  </div>
  <script type="module" src="src/main.ts"></script>
  <script>
    // Tizen TV support: listen for remote key events
    function isTizen() {
      return /Tizen|SMART-TV|SmartTV|SamsungBrowser/i.test(navigator.userAgent);
    }
    if (isTizen()) {
      document.addEventListener('keydown', function(e) {
        if (e.repeat) return;
        switch (e.key) {
          case 'ArrowLeft':
            document.getElementById('btn-left')?.dispatchEvent(new Event('touchstart', { bubbles: true }));
            break;
          case 'ArrowUp':
            document.getElementById('btn-jump')?.dispatchEvent(new Event('touchstart', { bubbles: true }));
            break;
          case 'ArrowRight':
            document.getElementById('btn-right')?.dispatchEvent(new Event('touchstart', { bubbles: true }));
            break;
        }
      });
      document.addEventListener('keyup', function(e) {
        switch (e.key) {
          case 'ArrowLeft':
            document.getElementById('btn-left')?.dispatchEvent(new Event('touchend', { bubbles: true }));
            break;
          case 'ArrowUp':
            document.getElementById('btn-jump')?.dispatchEvent(new Event('touchend', { bubbles: true }));
            break;
          case 'ArrowRight':
            document.getElementById('btn-right')?.dispatchEvent(new Event('touchend', { bubbles: true }));
            break;
        }
      });
    }
  </script>
  <script>
    // Responsive canvas sizing and landscape overlay
    function isMobile() {
      return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
    }
    function handleOrientation() {
      const overlay = document.getElementById('rotate-overlay');
      if (isMobile() && window.innerWidth > window.innerHeight) {
        if (overlay) overlay.style.display = 'flex';
      } else {
        if (overlay) overlay.style.display = 'none';
      }
    }
    function resizeCanvas() {
      const canvas = document.getElementById('gameCanvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      handleOrientation();
    }
    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('orientationchange', resizeCanvas);
    resizeCanvas();
    // Prevent scrolling/zooming on mobile
    document.addEventListener('touchmove', function(e) { e.preventDefault(); }, { passive: false });
  </script>
  <script>
    // Show mobile controls only on mobile devices
    function isMobile() {
      return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
    }
    if (isMobile()) {
      const mobileControls = document.getElementById('onscreen-controls');
      const desktopCopyright = document.getElementById('desktop-copyright');
      if (mobileControls) {
        mobileControls.style.display = 'flex';
      }
      if (desktopCopyright) {
        desktopCopyright.style.display = 'none';
      }
    }
  </script>
  </main>
  <noscript>
    <div style="background:#222;color:#fff;padding:32px;text-align:center;font-size:1.2em;">
      This game requires JavaScript to play. Please enable JavaScript in your browser.
    </div>
  </noscript>
</body>
</html> 